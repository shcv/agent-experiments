#+TITLE: Claude Code Environment Variables Reference
#+DATE: 2025-07-19

* Overview

This document provides a comprehensive reference for all environment variables used by Claude Code, organized by category and use case.

* Quick Reference by Use Case

** Essential Configuration
| Variable | Purpose | Default |
|----------+---------+---------|
| =ANTHROPIC_API_KEY= | Primary API authentication | None (required) |
| =ANTHROPIC_MODEL= | Override default model | Config/built-in |
| =CLAUDE_CONFIG_DIR= | Custom config directory | ~/.claude |

** Privacy Configuration
| Variable | Purpose | Impact |
|----------+---------+--------|
| =DISABLE_TELEMETRY= | Disable all telemetry | No usage tracking |
| =CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC= | Minimal network mode | No updates/telemetry |
| =DISABLE_ERROR_REPORTING= | No crash reports | No error tracking |
| =DISABLE_AUTOUPDATER= | No auto-updates | Manual updates only |

** Cloud Provider Selection
| Variable | Purpose | Required With |
|----------+---------+---------------|
| =CLAUDE_CODE_USE_BEDROCK= | Use AWS Bedrock | AWS credentials |
| =CLAUDE_CODE_USE_VERTEX= | Use Google Vertex AI | GCP project ID |

* Detailed Reference

** Authentication & API Configuration

*** ANTHROPIC_API_KEY
- *Purpose*: Primary API key for Anthropic's Claude API
- *Type*: String
- *Required*: Yes (unless using other auth methods)
- *Priority*: 3rd in auth chain
- *Example*: =ANTHROPIC_API_KEY=sk-ant-api03-xxxxx=

*** ANTHROPIC_AUTH_TOKEN
- *Purpose*: Alternative authentication using claude.ai session
- *Type*: String
- *Priority*: 1st in auth chain (highest)
- *Note*: Takes precedence over API key

*** ANTHROPIC_BASE_URL
- *Purpose*: Override default API endpoint
- *Type*: URL string
- *Default*: Standard Anthropic API URL
- *Use Case*: Proxy setups or custom deployments

*** ANTHROPIC_CUSTOM_HEADERS
- *Purpose*: Add custom HTTP headers to API requests
- *Type*: JSON string
- *Example*: =ANTHROPIC_CUSTOM_HEADERS='{"X-Custom": "value"}'=

** Model Configuration

*** ANTHROPIC_MODEL
- *Purpose*: Select specific Claude model
- *Type*: String
- *Examples*: claude-4-opus, claude-3.5-sonnet
- *Note*: Subject to availability checks

*** ANTHROPIC_SMALL_FAST_MODEL
- *Purpose*: Model for quick operations
- *Type*: String
- *Default*: claude-3-5-haiku
- *Use Case*: Cost optimization for simple tasks

*** ANTHROPIC_BETAS
- *Purpose*: Enable beta features
- *Type*: Comma-separated string
- *Example*: =ANTHROPIC_BETAS=prompt-caching,thinking=

*** MAX_THINKING_TOKENS
- *Purpose*: Limit tokens for reasoning
- *Type*: Integer
- *Validation*: Must be > 0
- *Use Case*: Control reasoning costs

*** CLAUDE_CODE_MAX_OUTPUT_TOKENS
- *Purpose*: Maximum response length
- *Type*: Integer
- *Use Case*: Prevent overly long responses

** Cloud Provider Configuration

*** AWS Bedrock
#+begin_src bash
# Enable Bedrock backend
export CLAUDE_CODE_USE_BEDROCK=true
export AWS_REGION=us-east-1
export AWS_ACCESS_KEY_ID=your-key
export AWS_SECRET_ACCESS_KEY=your-secret
# Optional: temporary credentials
export AWS_SESSION_TOKEN=your-token
# Optional: custom endpoint
export BEDROCK_BASE_URL=https://custom.bedrock.endpoint
#+end_src

*** Google Vertex AI
#+begin_src bash
# Enable Vertex AI backend
export CLAUDE_CODE_USE_VERTEX=true
export ANTHROPIC_VERTEX_PROJECT_ID=your-project-id
export CLOUD_ML_REGION=us-east5
# Model-specific regions (optional)
export VERTEX_REGION_CLAUDE_3_5_SONNET=us-central1
export VERTEX_REGION_CLAUDE_4_0_OPUS=europe-west4
#+end_src

** Feature Controls

*** Tool & Behavior Flags
| Variable | Purpose | Values |
|----------+---------+--------|
| =DISABLE_INTERLEAVED_THINKING= | Disable thinking features | true/false |
| =DISABLE_PROMPT_CACHING= | Disable cost optimization | true/false |
| =DISABLE_NON_ESSENTIAL_MODEL_CALLS= | Reduce API usage | true/false |
| =CLAUDE_CODE_ENABLE_UNIFIED_READ_TOOL= | Unified file reading | true/false |
| =ENABLE_BACKGROUND_TASKS= | Enable background processing | true/false |
| =DISABLE_COST_WARNINGS= | Hide cost notifications | true/false |

*** Bash Execution
| Variable | Purpose | Default |
|----------+---------+---------|
| =BASH_DEFAULT_TIMEOUT_MS= | Default command timeout | 120000 (2 min) |
| =BASH_MAX_TIMEOUT_MS= | Maximum allowed timeout | 600000 (10 min) |
| =BASH_MAX_OUTPUT_LENGTH= | Output size limit | 30000 chars |
| =CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR= | Keep project context | false |

** Network & Proxy

*** Proxy Configuration
#+begin_src bash
# HTTPS proxy (checked first)
export HTTPS_PROXY=http://proxy.company.com:8080
# or lowercase variant
export https_proxy=http://proxy.company.com:8080

# HTTP proxy (fallback)
export HTTP_PROXY=http://proxy.company.com:8080
# or lowercase variant
export http_proxy=http://proxy.company.com:8080
#+end_src

*** Network Control
- =CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC= - Minimal network usage
- =DISABLE_AUTOUPDATER= - No update checks
- =DISABLE_BUG_COMMAND= - Disable bug reporting

** Terminal & IDE Detection

*** Terminal Detection
The system automatically detects terminal type through various environment variables:
- =TERM= - Terminal type (xterm, cygwin, etc.)
- =TERM_PROGRAM= - Specific terminal application
- =TERMINAL_EMULATOR= - Alternative terminal identifier

*** IDE Integration
| Variable | Purpose | Use Case |
|----------+---------+----------|
| =CLAUDE_CODE_SSE_PORT= | Custom SSE port | IDE communication |
| =CLAUDE_CODE_IDE_SKIP_VALID_CHECK= | Skip validation | Development |
| =CLAUDE_CODE_IDE_SKIP_AUTO_INSTALL= | No auto-install | Manual setup |
| =CLAUDE_CODE_IDE_HOST_OVERRIDE= | Custom IDE host | Non-standard setup |
| =FORCE_CODE_TERMINAL= | Force IDE mode | Auto-connect |

** Development & Debugging

*** Development Modes
| Variable | Purpose | Values |
|----------+---------+--------|
| =DEV= | Development mode | "true" |
| =IS_DEMO= | Demo/presentation mode | true/false |
| =CLAUBBIT= | Internal Anthropic testing | "true" |

*** OpenTelemetry Configuration
#+begin_src bash
# Enable telemetry explicitly
export CLAUDE_CODE_ENABLE_TELEMETRY=true

# Configure OTEL exporters
export OTEL_METRICS_EXPORTER=otlp
export OTEL_LOGS_EXPORTER=otlp
export OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf

# Include user prompts in logs (PRIVACY WARNING!)
export OTEL_LOG_USER_PROMPTS=true

# Export intervals
export OTEL_METRIC_EXPORT_INTERVAL=60000
export OTEL_LOGS_EXPORT_INTERVAL=5000

# Shutdown timeout
export CLAUDE_CODE_OTEL_SHUTDOWN_TIMEOUT_MS=5000
#+end_src

** CI/CD Environment

*** GitHub Actions Detection
- =GITHUB_ACTIONS="true"= - In GitHub Actions
- =CLAUDE_CODE_ACTION="1"= - Claude Code's own action
- =GITHUB_EVENT_NAME= - Event type (push, pull_request, etc.)
- =RUNNER_ENVIRONMENT= - Runner type
- =RUNNER_OS= - Operating system

** System Paths

*** Configuration Paths
| Variable | Purpose | Default |
|----------+---------+---------|
| =CLAUDE_CONFIG_DIR= | Claude config location | ~/.claude |
| =XDG_CONFIG_HOME= | XDG config directory | ~/.config |
| =XDG_STATE_HOME= | XDG state directory | ~/.local/state |
| =XDG_CACHE_HOME= | XDG cache directory | ~/.cache |
| =XDG_DATA_HOME= | XDG data directory | ~/.local/share |

*** Editor Selection
Priority order:
1. =VISUAL= - Preferred visual editor
2. =EDITOR= - Fallback editor
3. System default

** Special Variables

*** Timeouts
All timeout variables accept milliseconds as integers:
- =API_TIMEOUT_MS= - API request timeout (default: 60000)
- =MCP_TIMEOUT= - MCP connection timeout (default: 30000)  
- =MCP_TOOL_TIMEOUT= - Individual tool timeout (default: very high)
- =CLAUDE_CODE_API_KEY_HELPER_TTL_MS= - API key cache TTL

*** Internal State
- =CLAUDE_CODE_ENTRYPOINT= - How CC was invoked (cli/mcp/sdk-cli)
- =CLAUDE_CODE_EXTRA_BODY= - Extra API request data
- =CLAUDE_CODE_DONT_INHERIT_ENV= - Clean subprocess environment

* Boolean Variable Format

Most boolean environment variables use a consistent parsing function that accepts:
- ="1"= - true
- ="true"= - true (case-insensitive)
- ="yes"= - true (case-insensitive) 
- ="on"= - true (case-insensitive)
- Any other value - false

* Examples

** Minimal Setup
#+begin_src bash
export ANTHROPIC_API_KEY=sk-ant-api03-xxxxx
#+end_src

** Privacy-Focused Setup
#+begin_src bash
export ANTHROPIC_API_KEY=sk-ant-api03-xxxxx
export DISABLE_TELEMETRY=true
export DISABLE_ERROR_REPORTING=true
export CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC=true
export DISABLE_AUTOUPDATER=true
#+end_src

** AWS Bedrock Setup
#+begin_src bash
export CLAUDE_CODE_USE_BEDROCK=true
export AWS_REGION=us-west-2
export AWS_ACCESS_KEY_ID=AKIAXXXXXXXX
export AWS_SECRET_ACCESS_KEY=xxxxxxxxxxxxx
#+end_src

** Development Setup
#+begin_src bash
export DEV=true
export CLAUDE_CODE_ENABLE_TELEMETRY=true
export OTEL_LOG_USER_PROMPTS=true
export DISABLE_COST_WARNINGS=true
export BASH_MAX_TIMEOUT_MS=1800000  # 30 minutes
#+end_src

** Performance Optimization
#+begin_src bash
export ANTHROPIC_SMALL_FAST_MODEL=claude-3-haiku
export DISABLE_NON_ESSENTIAL_MODEL_CALLS=true
export MAX_THINKING_TOKENS=1000
export BASH_MAX_OUTPUT_LENGTH=10000
#+end_src